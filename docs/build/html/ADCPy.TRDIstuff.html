
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>adcpy.TRDIstuff package &#8212; ADCPy  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="adcpy-trdistuff-package">
<h1>adcpy.TRDIstuff package<a class="headerlink" href="#adcpy-trdistuff-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-adcpy.TRDIstuff.TRDIpd0tonetcdf">
<span id="adcpy-trdistuff-trdipd0tonetcdf-module"></span><h2>adcpy.TRDIstuff.TRDIpd0tonetcdf module<a class="headerlink" href="#module-adcpy.TRDIstuff.TRDIpd0tonetcdf" title="Permalink to this headline">¶</a></h2>
<div class="section" id="trdipd0tonetcdf">
<h3>TRDIpd0tonetcdf<a class="headerlink" href="#trdipd0tonetcdf" title="Permalink to this headline">¶</a></h3>
<p>Convert full profile ADCP data ensembles currents to a netCDF4 file.
If you have a file with wave packets data, the splitter must be run first.</p>
<dl class="simple">
<dt>Usage:</dt><dd><p>python TRDIpd0tonetcdf.py pd0File cdfFile [good_ens] [serial_number=”unknown”] [time_type=”CF”] [delta_t=None]</p>
<dl class="field-list simple">
<dt class="field-odd">param str pd0File</dt>
<dd class="field-odd"><p>is path of raw PD0 format input file with ensembles of full profiles</p>
</dd>
<dt class="field-even">param str cdfFile</dt>
<dd class="field-even"><p>is path of a netcdf4 EPIC compliant output file</p>
</dd>
<dt class="field-odd">param tuple[int] good_ens</dt>
<dd class="field-odd"><p>(start_ensemble, end_ensemble) ensemble range to convert, use -1 for all</p>
</dd>
<dt class="field-even">param str serial_number</dt>
<dd class="field-even"><p>instrument serial number</p>
</dd>
<dt class="field-odd">param str time_type</dt>
<dd class="field-odd"><p>specify “CF” for Climate and Forecast convention time (cfconventions.org) or “EPIC”,
<a class="reference external" href="https://www.pmel.noaa.gov/epic/index.html">https://www.pmel.noaa.gov/epic/index.html</a>
or for both use “CF_with_EPIC” or “EPIC_with_CF”</p>
</dd>
<dt class="field-even">param str delta_t</dt>
<dd class="field-even"><p>time between ensembles or ensemble groups</p>
</dd>
</dl>
</dd>
<dt>Reference:</dt><dd><p>RD Instruments data format documentation “Workhorse Commands and Output Data Format” June 2018</p>
</dd>
</dl>
<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.analyzepd0file">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">analyzepd0file</code><span class="sig-paren">(</span><em class="sig-param">pd0file</em>, <em class="sig-param">verbose=False</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.analyzepd0file" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>determine the input file size, read some ensembles, make an estimate of the number of ensembles within, return the</dt><dd><p>data from the first ensemble.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pd0file</strong> (<em>str</em>) – path and file name to raw ADC data file in pd0 format</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – output ensemble information</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of ensembles in file, number of bytes in each ensemble, data from the first ensemble,
number of bytes to the start of the data</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.bitstrBE">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">bitstrBE</code><span class="sig-paren">(</span><em class="sig-param">byte</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.bitstrBE" title="Permalink to this definition">¶</a></dt>
<dd><p>make a bit string from big endian byte</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>byte</strong> (<em>byte</em>) – a byte</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a string of ones and zeros, the bbits in the byte</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.bitstrLE">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">bitstrLE</code><span class="sig-paren">(</span><em class="sig-param">byte</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.bitstrLE" title="Permalink to this definition">¶</a></dt>
<dd><p>make a bit string from little endian byte</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>byte</strong> (<em>byte</em>) – a byte</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a string of ones and zeros, the bits in the byte</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.convert_pd0_to_netcdf">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">convert_pd0_to_netcdf</code><span class="sig-paren">(</span><em class="sig-param">pd0File</em>, <em class="sig-param">cdfFile</em>, <em class="sig-param">good_ens</em>, <em class="sig-param">serial_number</em>, <em class="sig-param">time_type</em>, <em class="sig-param">delta_t</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.convert_pd0_to_netcdf" title="Permalink to this definition">¶</a></dt>
<dd><p>convert from binary pd0 format to netcdf</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pd0File</strong> (<em>str</em>) – is path of raw PD0 format input file with current ensembles</p></li>
<li><p><strong>cdfFile</strong> (<em>str</em>) – is path of a netcdf4 EPIC compliant output file</p></li>
<li><p><strong>good_ens</strong> (<em>list</em>) – [start, end] ensembles to export.  end = -1 for all ensembles in file</p></li>
<li><p><strong>serial_number</strong> (<em>str</em>) – serial number of the instrument</p></li>
<li><p><strong>time_type</strong> (<em>str</em>) – “CF” for CF conventions, “EPIC” for EPIC conventions</p></li>
<li><p><strong>delta_t</strong> (<em>str</em>) – time between ensembles, in seconds.  15 min profiles would be 900</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>count of ensembles read, ending index of netCDF file, error type if file could not be read</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.julian">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">julian</code><span class="sig-paren">(</span><em class="sig-param">year</em>, <em class="sig-param">month</em>, <em class="sig-param">day</em>, <em class="sig-param">hour</em>, <em class="sig-param">mn</em>, <em class="sig-param">sec</em>, <em class="sig-param">hund</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.julian" title="Permalink to this definition">¶</a></dt>
<dd><p>convert hours, minutes and seconds to decimal hours</p>
<dl class="simple">
<dt>reference:</dt><dd><p><a class="reference external" href="http://stackoverflow.com/questions/31142181/calculating-julian-date-in-python/41769526#41769526">http://stackoverflow.com/questions/31142181/calculating-julian-date-in-python/41769526#41769526</a>
and R. Signell’s old matlab conversion code julian.m and hms2h.m</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>int</em>) – year</p></li>
<li><p><strong>month</strong> (<em>int</em>) – month</p></li>
<li><p><strong>day</strong> (<em>int</em>) – day</p></li>
<li><p><strong>hour</strong> (<em>int</em>) – hour</p></li>
<li><p><strong>mn</strong> (<em>int</em>) – minute</p></li>
<li><p><strong>sec</strong> (<em>int</em>) – second</p></li>
<li><p><strong>hund</strong> (<em>int</em>) – hundredth of second</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>julian day</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_bottom_track">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_bottom_track</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em>, <em class="sig-param">nbeams</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_bottom_track" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the bottom track data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
<li><p><strong>nbeams</strong> (<em>int</em>) – number of acoustic beams</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bottom track data as a dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_correlation">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_correlation</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em>, <em class="sig-param">ncells</em>, <em class="sig-param">nbeams</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_correlation" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the correlation data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
<li><p><strong>ncells</strong> (<em>int</em>) – number of cells in the profile</p></li>
<li><p><strong>nbeams</strong> (<em>int</em>) – number of acoustic beams</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>correlation data as a beam x cell numpy array of ints</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_ensemble">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_ensemble</code><span class="sig-paren">(</span><em class="sig-param">ensbytes</em>, <em class="sig-param">verbose</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_ensemble" title="Permalink to this definition">¶</a></dt>
<dd><p>convert the binary data for one ensemble to a dictionary of readable data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ensbytes</strong> (<em>binary</em>) – the raw binary data for the ensemble</p></li>
<li><p><strong>verbose</strong> – print out the data as it is converted</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dictionary of the data, a string describing any errors</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_event_log">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_event_log</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_event_log" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the event log data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>event log data as a dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_fixed_leader">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_fixed_leader</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_fixed_leader" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the Fixed Leader section of data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary of readable fixed leader data</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_header">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_header</code><span class="sig-paren">(</span><em class="sig-param">bstream</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_header" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the TRDI header data for the number of data types and byte offsets to each</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bstream</strong> (<em>bytes</em>) – the raw binary header information</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary of readable header data</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_intensity">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_intensity</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em>, <em class="sig-param">ncells</em>, <em class="sig-param">nbeams</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_intensity" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the intensity data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
<li><p><strong>ncells</strong> (<em>int</em>) – number of cells in the profile</p></li>
<li><p><strong>nbeams</strong> (<em>int</em>) – number of acoustic beams</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>intensity data as a beam x cell numpy array of ints</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_percent_good">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_percent_good</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em>, <em class="sig-param">ncells</em>, <em class="sig-param">nbeams</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_percent_good" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the Percent Good data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
<li><p><strong>ncells</strong> (<em>int</em>) – number of cells in the profile</p></li>
<li><p><strong>nbeams</strong> (<em>int</em>) – number of acoustic beams</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>percent good data as a beam x cell numpy array of ints</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_transformation_matrix">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_transformation_matrix</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em>, <em class="sig-param">nbeams</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_transformation_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the transformation matrix data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
<li><p><strong>nbeams</strong> (<em>int</em>) – number of acoustic beams</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>transformation matrix data as a beam x 3 numpy array of ints</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_variable_leader">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_variable_leader</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_variable_leader" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the Variable Leader section of data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary of readable variable leader data</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_velocity">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_velocity</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em>, <em class="sig-param">ncells</em>, <em class="sig-param">nbeams</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_velocity" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the velocity data, each velocity value is stored as a two byte, twos complement integer [-32768 to 32767]
with the LSB sent first.  Units are mm/s.  A value of -32768 = 0x8000 is a bad velocity value</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
<li><p><strong>ncells</strong> (<em>int</em>) – number of cells in the profile</p></li>
<li><p><strong>nbeams</strong> (<em>int</em>) – number of acoustic beams</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>velocity data as a beam x cell numpy array of ints</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_vertical_beam_leader">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_vertical_beam_leader</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_vertical_beam_leader" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the TRDI V beam leader data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dict of readable beam leader settings</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_vertical_correlation">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_vertical_correlation</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em>, <em class="sig-param">ncells</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_vertical_correlation" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the vertical beam correlation data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
<li><p><strong>ncells</strong> (<em>int</em>) – number of cells in the profile</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>vertical beam correlation data as a numpy array of ints</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_vertical_intensity">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_vertical_intensity</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em>, <em class="sig-param">ncells</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_vertical_intensity" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the vertical beam intensity data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
<li><p><strong>ncells</strong> (<em>int</em>) – number of cells in the profile</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>vertical beam intensity data as a numpy array of ints</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_vertical_percent_good">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_vertical_percent_good</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em>, <em class="sig-param">ncells</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_vertical_percent_good" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the vertical beam percent good data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
<li><p><strong>ncells</strong> (<em>int</em>) – number of cells in the profile</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>vertical beam percent good data as a numpy array of ints</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_vertical_ping_setup">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_vertical_ping_setup</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_vertical_ping_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the TRDI V ping setup data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dict of readable ping setup settings</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_vertical_system_configuration">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_vertical_system_configuration</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_vertical_system_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the TRDI V system configuration data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dict of readable system configuration settings</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_vertical_velocity">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_vertical_velocity</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em>, <em class="sig-param">ncells</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_vertical_velocity" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the vertical beam velocity data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
<li><p><strong>ncells</strong> (<em>int</em>) – number of cells in the profile</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>vertical beam velocity data as a numpy array of ints</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_wave_parameters">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_wave_parameters</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_wave_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the wave parameters (wave statistics)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>wave data as a dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_wave_sea_swell">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">parse_TRDI_wave_sea_swell</code><span class="sig-paren">(</span><em class="sig-param">bstream</em>, <em class="sig-param">offset</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.parse_TRDI_wave_sea_swell" title="Permalink to this definition">¶</a></dt>
<dd><p>parse the wave sea swell parameters (wave statistics)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bstream</strong> (<em>bytes</em>) – an entire ensemble</p></li>
<li><p><strong>offset</strong> (<em>int</em>) – the location in the bytes object of the first byte of this data format</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>wave sea swell data as a dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.read_TRDI_header">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">read_TRDI_header</code><span class="sig-paren">(</span><em class="sig-param">infile</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.read_TRDI_header" title="Permalink to this definition">¶</a></dt>
<dd><p>read the TRDI header bytes directly from a file pointer position and test for end of file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>infile</strong> – pointer to a file open for reading</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dictionary of the TRDI Header data</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.setup_netcdf_file">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">setup_netcdf_file</code><span class="sig-paren">(</span><em class="sig-param">fname</em>, <em class="sig-param">ens_data</em>, <em class="sig-param">gens</em>, <em class="sig-param">serial_number</em>, <em class="sig-param">time_type</em>, <em class="sig-param">delta_t</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.setup_netcdf_file" title="Permalink to this definition">¶</a></dt>
<dd><p>create the netcdf output file, define dimensions and variables</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>str</em>) – path and name of netcdf file</p></li>
<li><p><strong>ens_data</strong> (<em>dict</em>) – data from the first ensemble to be read</p></li>
<li><p><strong>gens</strong> (<em>tuple</em>) – start and end ensemble indices</p></li>
<li><p><strong>serial_number</strong> (<em>str</em>) – instrument serial number</p></li>
<li><p><strong>time_type</strong> (<em>str</em>) – indicate if “CF”, “CF_with_EPIC”, “EPIC_with_CF” or “EPIC” timebase for “time”</p></li>
<li><p><strong>delta_t</strong> (<em>str</em>) – time between ensembles</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>netcdf file object, string describing the time units for CF time</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.transpose_rotation_matrix">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">transpose_rotation_matrix</code><span class="sig-paren">(</span><em class="sig-param">matrix</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.transpose_rotation_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>transpose the rotation matrix
:param matrix: rotation matrix from file
:return: transposed matrix</p>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.TRDIpd0tonetcdf.write_dict_to_cdf_attributes">
<code class="sig-prename descclassname">adcpy.TRDIstuff.TRDIpd0tonetcdf.</code><code class="sig-name descname">write_dict_to_cdf_attributes</code><span class="sig-paren">(</span><em class="sig-param">netcdf_object</em>, <em class="sig-param">d</em>, <em class="sig-param">tag</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.TRDIpd0tonetcdf.write_dict_to_cdf_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>write a dictionary to netCDF attributes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>netcdf_object</strong> – netcdf file object</p></li>
<li><p><strong>d</strong> (<em>dict</em>) – dictionary of attribute names and values</p></li>
<li><p><strong>tag</strong> (<em>str</em>) – an identifier to prepend to the attribute name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the dictionary d with any strings that can be changed to numbers, as numbers</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-adcpy.TRDIstuff.pd0">
<span id="adcpy-trdistuff-pd0-module"></span><h2>adcpy.TRDIstuff.pd0 module<a class="headerlink" href="#module-adcpy.TRDIstuff.pd0" title="Permalink to this headline">¶</a></h2>
<p>Functions to handle Acoustic Doppler Current Profiler data from
a Teledyne RD Instruments instrument that is in pd0 format</p>
<p>As a script (to split a raw PD0 file into waves and currents):</p>
<p>python pd0.py [path] rawFile wavesFile currentsFile
python pd0.py [-p path] -r rawFile -w wavesFile -c currentsFile
python pd0.py [–path=path] </p>
<blockquote>
<div><p>–raw=rawFile –waves=wavesFile –currents=currentsFile</p>
</div></blockquote>
<dl class="simple">
<dt>where:</dt><dd><p>path         is a path to prepend to the following
rawFile      is path of raw PD0 format input file
wavesFile    is path of waves PD0 format output file
currentsFile is path of currents PD0 format output file</p>
</dd>
</dl>
<p>or (to run the test suite):</p>
<p>python pd0.py -t
python pd0.py –test</p>
<p>or (to see this help message):</p>
<p>python pd0.py -h
python pd0.py –help</p>
<p>As a module:</p>
<p>import adcp.pd0
adcp.pd0.split(rawFile,wavesFile,currentsFile)</p>
<dl class="simple">
<dt>where:</dt><dd><p>rawFile      is a file object representing the raw PD0 format input
wavesFile    is a file object representing the waves PD0 format output
currentsFile is a file object representing the currents PD0 format output</p>
</dd>
</dl>
<dl class="function">
<dt id="adcpy.TRDIstuff.pd0.split">
<code class="sig-prename descclassname">adcpy.TRDIstuff.pd0.</code><code class="sig-name descname">split</code><span class="sig-paren">(</span><em class="sig-param">rawFile</em>, <em class="sig-param">wavesFile</em>, <em class="sig-param">currentsFile</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.pd0.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Split PD0 format data into seperate waves and currents</p>
<p>split()rawFile,wavesFile,currentsFile -&gt; None</p>
</dd></dl>

<dl class="function">
<dt id="adcpy.TRDIstuff.pd0.test">
<code class="sig-prename descclassname">adcpy.TRDIstuff.pd0.</code><code class="sig-name descname">test</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.pd0.test" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute test suite</p>
</dd></dl>

</div>
<div class="section" id="module-adcpy.TRDIstuff.pd0splitter">
<span id="adcpy-trdistuff-pd0splitter-module"></span><h2>adcpy.TRDIstuff.pd0splitter module<a class="headerlink" href="#module-adcpy.TRDIstuff.pd0splitter" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pd0splitter">
<h3>pd0splitter<a class="headerlink" href="#pd0splitter" title="Permalink to this headline">¶</a></h3>
<p>Functions to handle Acoustic Doppler Current Profiler data Teledyne RD Instruments pd0 format</p>
<p>As a script (to split a raw PD0 file into waves packets and currents binary files)</p>
<dl class="simple">
<dt>Usage:</dt><dd><p>python pd0splitter.py pd0file packets_file currents_file [first_ensemble] [last_ensemble]</p>
<dl class="field-list simple">
<dt class="field-odd">param str pd0file</dt>
<dd class="field-odd"><p>is path of raw PD0 format input file</p>
</dd>
<dt class="field-even">param str packets_file</dt>
<dd class="field-even"><p>is path of waves PD0 format output file</p>
</dd>
<dt class="field-odd">param str currents_file</dt>
<dd class="field-odd"><p>is path of currents PD0 format output file</p>
</dd>
<dt class="field-even">param int first_ensemble</dt>
<dd class="field-even"><p>is a integer ensemble number</p>
</dd>
<dt class="field-odd">param int last_ensemble</dt>
<dd class="field-odd"><p>is a integer ensemble number</p>
</dd>
</dl>
</dd>
</dl>
<p>The pd0file is assumed to be in PD0 format.  PD0 format assumes the file is a succession of ensembles.
Each ensemble starts with a two byte header identifying the type of data contained in the ensemble.</p>
<p>Following the header is a two byte length field specifying the length of the header, length field, and data combined</p>
<p>Following the length field is raw data for the number of bytes indicated by the length field</p>
<p>Following the raw data is a checksum field which is the two least significant bytes of the sum of the byte values
of the header, length field, and raw data.</p>
<p>updated to run in python 3x, Marinna Martini 1/12/2017
adapted from pd0.py by Gregory P. Dusek <a class="reference external" href="http://trac.nccoos.org/dataproc/wiki/DPWP/docs">http://trac.nccoos.org/dataproc/wiki/DPWP/docs</a></p>
<dl class="function">
<dt id="adcpy.TRDIstuff.pd0splitter.split">
<code class="sig-prename descclassname">adcpy.TRDIstuff.pd0splitter.</code><code class="sig-name descname">split</code><span class="sig-paren">(</span><em class="sig-param">pd0file</em>, <em class="sig-param">packets_file</em>, <em class="sig-param">currents_file</em>, <em class="sig-param">first_ensemble</em>, <em class="sig-param">last_ensemble</em><span class="sig-paren">)</span><a class="headerlink" href="#adcpy.TRDIstuff.pd0splitter.split" title="Permalink to this definition">¶</a></dt>
<dd><p>split ADCP data in pd0 format into current profiles and wave packets</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pd0file</strong> (<em>str</em>) – path and name of raw PD0 format input file</p></li>
<li><p><strong>packets_file</strong> (<em>str</em>) – path and name of waves PD0 format output file</p></li>
<li><p><strong>currents_file</strong> (<em>str</em>) – path and name of currents PD0 format output file</p></li>
<li><p><strong>first_ensemble</strong> (<em>int</em>) – ensemble number of the first ensemble to read</p></li>
<li><p><strong>last_ensemble</strong> (<em>int</em>) – ensemble number of the last ensemble to read</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-adcpy.TRDIstuff">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-adcpy.TRDIstuff" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">ADCPy</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Marinna Martini.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/ADCPy.TRDIstuff.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>