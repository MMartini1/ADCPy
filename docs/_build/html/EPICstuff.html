
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Generic tools &#8212; ADCPy  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Nortek Signature tools" href="Nortekstuff.html" />
    <link rel="prev" title="Welcome to ADCPy’s documentation!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-EPICstuff.reshapeEPIC">
<span id="generic-tools"></span><h1>Generic tools<a class="headerlink" href="#module-EPICstuff.reshapeEPIC" title="Permalink to this headline">¶</a></h1>
<div class="section" id="reshapeepic">
<h2>reshapeEPIC<a class="headerlink" href="#reshapeepic" title="Permalink to this headline">¶</a></h2>
<p>apportion a continuous time series file into bursts (e.g. reshape)</p>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>the expected dimensions are [time, depth, lat, lon] for continuous data in EPIC</p></li>
<li><p>we are reshaping to [time, sample, depth, lat, lon]</p></li>
<li><p>for ADCP files, beams are expressed as variables vel1, vel2, … veln</p></li>
<li><p>if there is a shape problem then the data file might not be properly understood.</p></li>
</ul>
<p>It might be that this code won’t work, this problem will become evident if an error is produced and operation
returns to the keyboard in debug mode.  If this happens, check the shapes of the variables.</p>
<p>WARNING:  time may not be monotonically increasing within bursts (e.g. along the sample dimension)
this means that if the number of samples per burst is inconsistent, or if
there are gaps in time, the end of a burst may be fill_value, including time values</p>
<p>Marinna Martini for the USGS in Woods Hole, 9/20/2018
originally coded for MATLAB as reshapeEPIC
<a class="reference external" href="https://cmgsoft.repositoryhosting.com/trac/cmgsoft_m-cmg/browser/trunk/MMstuff/reshapeEPIC.m">https://cmgsoft.repositoryhosting.com/trac/cmgsoft_m-cmg/browser/trunk/MMstuff/reshapeEPIC.m</a></p>
<p>Created on Thu Sep 20 14:52:42 2018</p>
<p>&#64;author: mmartini
<a class="reference external" href="https://github.com/mmartini-usgs">https://github.com/mmartini-usgs</a></p>
<dl class="function">
<dt id="EPICstuff.reshapeEPIC.find_boundaries">
<code class="sig-prename descclassname">EPICstuff.reshapeEPIC.</code><code class="sig-name descname">find_boundaries</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">edges</em><span class="sig-paren">)</span><a class="headerlink" href="#EPICstuff.reshapeEPIC.find_boundaries" title="Permalink to this definition">¶</a></dt>
<dd><p>using a list of start and end timestamps (edges) that delineate the beginning times and ending times
of burts of measurements, find the indices into the data that correspond to these edges.
The time base may be irregular, it does not matter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>list</em>) – time stamps from the data</p></li>
<li><p><strong>edges</strong> (<em>list</em><em>[</em><em>tuple</em><em>]</em>) – start and end times</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of indices</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="EPICstuff.reshapeEPIC.find_first_masked_value">
<code class="sig-prename descclassname">EPICstuff.reshapeEPIC.</code><code class="sig-name descname">find_first_masked_value</code><span class="sig-paren">(</span><em class="sig-param">x</em><span class="sig-paren">)</span><a class="headerlink" href="#EPICstuff.reshapeEPIC.find_first_masked_value" title="Permalink to this definition">¶</a></dt>
<dd><p>helper function to find the first occurrence of a masked value in a numpy masked array
returns None if no masked values are found
:param numpy array x:
:return: index</p>
</dd></dl>

<dl class="function">
<dt id="EPICstuff.reshapeEPIC.generate_expected_start_times">
<code class="sig-prename descclassname">EPICstuff.reshapeEPIC.</code><code class="sig-name descname">generate_expected_start_times</code><span class="sig-paren">(</span><em class="sig-param">cdffile</em>, <em class="sig-param">dim</em>, <em class="sig-param">burst_start_offset</em>, <em class="sig-param">burst_interval</em>, <em class="sig-param">burst_length</em>, <em class="sig-param">sample_rate</em><span class="sig-paren">)</span><a class="headerlink" href="#EPICstuff.reshapeEPIC.generate_expected_start_times" title="Permalink to this definition">¶</a></dt>
<dd><p>generate a regular and recurring set of start and end timestamps that
delineate the beginning times and ending times of burts of measurements</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cdffile</strong> (<em>str</em>) – name of a continuous time series data file</p></li>
<li><p><strong>dim</strong> (<em>int</em>) – the unlimited or time dimension which we will find the indices to reshape</p></li>
<li><p><strong>burst_start_offset</strong> (<em>int</em>) – when to start to make bursts in the continuous data, seconds</p></li>
<li><p><strong>burst_interval</strong> (<em>int</em>) – time between start of bursts, seconds</p></li>
<li><p><strong>burst_length</strong> (<em>int</em>) – number of samples in a burst</p></li>
<li><p><strong>sample_rate</strong> (<em>int</em>) – Hertz</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of tuples of start and end times for each burst</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="EPICstuff.reshapeEPIC.reshapeEPIC">
<code class="sig-prename descclassname">EPICstuff.reshapeEPIC.</code><code class="sig-name descname">reshapeEPIC</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#EPICstuff.reshapeEPIC.reshapeEPIC" title="Permalink to this definition">¶</a></dt>
<dd><p>apportion a continuous time series file into bursts (e.g. reshape)</p>
<dl class="field-list simple">
<dt class="field-odd">Usage</dt>
<dd class="field-odd"><p>issue_flags = reshapeEPIC(cont_file, burst_file, burst_length,
dim=None, edges=None, drop=None)</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>cont_file</strong> (<em>str</em>) – name of netCDF file with continuous data</p></li>
<li><p><strong>burst_file</strong> (<em>str</em>) – name of file to store the reshaped data, attributes will be copied</p></li>
<li><p><strong>burst_length</strong> (<em>int</em>) – maximum number of samples in each burst</p></li>
<li><p><strong>dim</strong> (<em>str</em>) – name of dimension along which we will split the data, usually ‘time’ or ‘Rec’</p></li>
<li><p><strong>edges</strong> (<em>list</em><em>[</em><em>tuple</em><em>]</em>) – [(start0, end0), (start1, end1), …] of edges defining the edges of each burst</p></li>
<li><p><strong>drop</strong> (<em>str</em>) – set of variable names to omit from the output file</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dictionary of problem types and status</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="EPICstuff.reshapeEPIC.save_indexes_to_file">
<code class="sig-prename descclassname">EPICstuff.reshapeEPIC.</code><code class="sig-name descname">save_indexes_to_file</code><span class="sig-paren">(</span><em class="sig-param">cdffile</em>, <em class="sig-param">txtfile</em>, <em class="sig-param">edge_tuples</em><span class="sig-paren">)</span><a class="headerlink" href="#EPICstuff.reshapeEPIC.save_indexes_to_file" title="Permalink to this definition">¶</a></dt>
<dd><p>write indexes to a file with the time stamps for QA/QC</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cdffile</strong> (<em>str</em>) – the continuous time series netCDF file being operated upon</p></li>
<li><p><strong>txtfile</strong> (<em>str</em>) – a file to output a string listing of time stamps</p></li>
<li><p><strong>edge_tuples</strong> (<em>list</em><em>[</em><em>tuple</em><em>]</em>) – the bursts to output</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-EPICstuff.ADCPcdf2ncEPIC"></span><p>This code takes a raw netcdf file containing data from any 4 beam Janus
acoustic doppler profiler, with or without a center beam, and transforms the
data into Earth coordinates.  Data are output to netCDF using controlled
vocabulary for the variable names, following the EPIC convention wherever
possible.</p>
<p>ADCPcdf2ncEPIC.doEPIC_ADCPfile(cdfFile, ncFile, attFile, settings)</p>
<p>cdfFile = path to a USGS raw netCDF ADCP data file
ncFile = a netcdf file structured according to PMEL EPIC conventions
attFile = a file containing global attributes (metadata) for the data.  See below
settings = a dictionary of preferences for the processing
::settings[‘good_ensembles’] = starting and ending indices of the input file. For all data use [0,np.inf]
::settings[‘orientation’] = ‘UP’ # uplooking ADCP, for downlooking, use DOWN
::settings[‘transducer_offset_from_bottom’] = 2.02
::settings[‘transformation’] = ‘EARTH’ # | BEAM | INST
::settings[‘adjust_to_UTC’] = 5 # for EST to UTC, if no adjustment, set to 0 or omit</p>
<p>Depth dependent attributes are compute from the mean Pressure found in the raw
data file.  So it is best to have the time series trimmed to the in water
time or to provide the good ensemble indices for in water time</p>
<p>note that file names and paths may not include spaces</p>
<dl class="simple">
<dt>Example contents of a Global Attribute file:</dt><dd><p>SciPi; J.Q. Scientist
PROJECT; USGS Coastal Marine Geology Program
EXPERIMENT; MVCO 2015 Stress Comparison
DESCRIPTION; Quadpod 13.9m
DATA_SUBTYPE; MOORED
COORD_SYSTEM; GEOGRAPHIC + SAMPLE
Conventions; PMEL/EPIC
MOORING; 1057
WATER_DEPTH; 13.9
WATER_DEPTH_NOTE; (meters), nominal
WATER_DEPTH_source; ship fathometer
latitude; 41.3336633
longitude; -70.565877
magnetic_variation; -14.7
Deployment_date; 17-Nov-2015
Recovery_date; 14-Dec-2015
DATA_CMNT;
platform_type; USGS aluminum T14 quadpod
DRIFTER; 0
POS_CONST; 0
DEPTH_CONST; 0
Conventions; PMEL/EPIC
institution; United States Geological Survey, Woods Hole Coastal and Marine Science Center
institution_url; <a class="reference external" href="http://woodshole.er.usgs.gov">http://woodshole.er.usgs.gov</a></p>
</dd>
</dl>
<p>Created on Tue May 16 13:33:31 2017</p>
<p>&#64;author: mmartini</p>
<dl class="function">
<dt id="EPICstuff.ADCPcdf2ncEPIC.add_VAR_DESC">
<code class="sig-prename descclassname">EPICstuff.ADCPcdf2ncEPIC.</code><code class="sig-name descname">add_VAR_DESC</code><span class="sig-paren">(</span><em class="sig-param">cdf</em><span class="sig-paren">)</span><a class="headerlink" href="#EPICstuff.ADCPcdf2ncEPIC.add_VAR_DESC" title="Permalink to this definition">¶</a></dt>
<dd><p>add the VAR_DESC global attribute constructed from variable names found in the file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cdf</strong> (<em>object</em>) – netCDF file object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="EPICstuff.ADCPcdf2ncEPIC.beam2inst">
<code class="sig-prename descclassname">EPICstuff.ADCPcdf2ncEPIC.</code><code class="sig-name descname">beam2inst</code><span class="sig-paren">(</span><em class="sig-param">adcpo</em>, <em class="sig-param">reverse=False</em>, <em class="sig-param">force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#EPICstuff.ADCPcdf2ncEPIC.beam2inst" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate velocities from beam to instrument coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>adcpo</strong> (<em>dict</em>) – containing the beam velocity data.</p></li>
<li><p><strong>reverse</strong> (<em>bool</em>) – If True, this function performs the inverse rotation (inst-&gt;beam).</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – When true do not check which coordinate system the data is in prior to performing this rotation.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="EPICstuff.ADCPcdf2ncEPIC.cal_earth_rotmatrix">
<code class="sig-prename descclassname">EPICstuff.ADCPcdf2ncEPIC.</code><code class="sig-name descname">cal_earth_rotmatrix</code><span class="sig-paren">(</span><em class="sig-param">heading=0</em>, <em class="sig-param">pitch=0</em>, <em class="sig-param">roll=0</em>, <em class="sig-param">declination=0</em><span class="sig-paren">)</span><a class="headerlink" href="#EPICstuff.ADCPcdf2ncEPIC.cal_earth_rotmatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>this transformation matrix is from the R.D. Instruments Coordinate Transformation booklet.
It presumes the beams are in the same position as RDI Workhorse ADCP beams, where,
when looking down on the transducers:
::Beam 3 is in the direction of the compass’ zero reference
::Beam 1 is to the right
::Beam 2 is to the left
::Beam 4 is opposite beam 3
::Pitch is about the beam 2-1 axis and is positive when beam 3 is raised
::Roll is about the beam 3-4 axis and is positive when beam 2 is raised
::Heading increases when beam 3 is rotated towards beam 1
Nortek Signature differs in these ways:
::TRDI beam 3 = Nortek beam 1
::TRDI beam 1 = Nortek beam 2
::TRDI beam 4 = Nortek beam 3
::TRDI beam 2 = Nortek beam 4
::Heading, pitch and roll behave the same as TRDI
:param float heading: ADCP heading in degrees
:param float pitch: ADCP pitch in degrees
:param float roll: ADCP roll in degrees
:param float declination: heading offset from true, Westerly is negative
:return:</p>
</dd></dl>

<dl class="function">
<dt id="EPICstuff.ADCPcdf2ncEPIC.calc_beam_rotmatrix">
<code class="sig-prename descclassname">EPICstuff.ADCPcdf2ncEPIC.</code><code class="sig-name descname">calc_beam_rotmatrix</code><span class="sig-paren">(</span><em class="sig-param">theta=20</em>, <em class="sig-param">convex=True</em>, <em class="sig-param">degrees=True</em><span class="sig-paren">)</span><a class="headerlink" href="#EPICstuff.ADCPcdf2ncEPIC.calc_beam_rotmatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the rotation matrix from beam coordinates to
instrument head coordinates.
per dolfyn rotate.py code here: <a class="reference external" href="https://github.com/lkilcher/dolfyn">https://github.com/lkilcher/dolfyn</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<em>float</em>) – is the angle of the heads (usually 20 or 30 degrees)</p></li>
<li><p><strong>convex</strong> (<em>int</em>) – is a flag for convex or concave head configuration.</p></li>
<li><p><strong>degrees</strong> (<em>bool</em>) – is a flag which specifies whether theta is in degrees or radians (default: degrees=True)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="EPICstuff.ADCPcdf2ncEPIC.doEPIC_ADCPfile">
<code class="sig-prename descclassname">EPICstuff.ADCPcdf2ncEPIC.</code><code class="sig-name descname">doEPIC_ADCPfile</code><span class="sig-paren">(</span><em class="sig-param">cdfFile</em>, <em class="sig-param">ncFile</em>, <em class="sig-param">attFile</em>, <em class="sig-param">settings</em><span class="sig-paren">)</span><a class="headerlink" href="#EPICstuff.ADCPcdf2ncEPIC.doEPIC_ADCPfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a raw netcdf file containing data from any 4 beam Janus acoustic doppler profiler,
with or without a center beam, and transforms the data into Earth coordinates.  Data are output to netCDF
using controlled vocabulary for the variable names, following the EPIC convention wherever possible.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cdfFile</strong> (<em>str</em>) – raw netCDF input data file name</p></li>
<li><p><strong>ncFile</strong> (<em>str</em>) – output file name</p></li>
<li><p><strong>attFile</strong> (<em>str</em>) – text file containing metadata</p></li>
<li><p><strong>settings</strong> (<em>dict</em>) – settings[‘good_ensembles’] = starting and ending indices of the input file.
For all data use [0,np.inf]
‘orientation’: ‘UP’ # uplooking ADCP, for downlooking, use DOWN
‘transducer_offset_from_bottom’: 2.02
‘transformation’: ‘EARTH’ | BEAM | INST
‘adjust_to_UTC’: 5 for EST to UTC, if no adjustment, set to 0 or omit</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="EPICstuff.ADCPcdf2ncEPIC.floor">
<code class="sig-prename descclassname">EPICstuff.ADCPcdf2ncEPIC.</code><code class="sig-name descname">floor</code><span class="sig-paren">(</span><em class="sig-param">dec</em><span class="sig-paren">)</span><a class="headerlink" href="#EPICstuff.ADCPcdf2ncEPIC.floor" title="Permalink to this definition">¶</a></dt>
<dd><p>convenience function to round down
provided to avoid loading the math package
and because np.floor was causing unexpected behavior w.r.t ints</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dec</strong> (<em>float</em>) – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>rounded number</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="EPICstuff.ADCPcdf2ncEPIC.inst2earth">
<code class="sig-prename descclassname">EPICstuff.ADCPcdf2ncEPIC.</code><code class="sig-name descname">inst2earth</code><span class="sig-paren">(</span><em class="sig-param">adcpo</em>, <em class="sig-param">reverse=False</em>, <em class="sig-param">fixed_orientation=False</em>, <em class="sig-param">force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#EPICstuff.ADCPcdf2ncEPIC.inst2earth" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate velocities from the instrument to earth coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>adcpo</strong> (<em>dict</em>) – containing the data in instrument coordinates</p></li>
<li><p><strong>reverse</strong> (<em>bool</em>) – If True, this function performs the inverse rotation (earth-&gt;inst).</p></li>
<li><p><strong>fixed_orientation</strong> (<em>bool</em>) – When true, take the average orientation and apply it over the whole record.</p></li>
<li><p><strong>force</strong> (<em>bool</em>) – When true do not check which coordinate system the data is in prior to performing this rotation.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The rotation matrix is taken from the Teledyne RDI ADCP Coordinate Transformation manual January 2008</p>
<p>When performing the forward rotation, this function sets the ‘inst2earth:fixed’ flag to the value of
<cite>fixed_orientation. When performing the reverse rotation, that value is ‘popped’ from the props dict and the input
value to this function`fixed_orientation</cite> has no effect. If <cite>‘inst2earth:fixed’</cite> is not in the props dict then
the input value <em>is</em> used.</p>
</dd></dl>

<dl class="function">
<dt id="EPICstuff.ADCPcdf2ncEPIC.read_globalatts">
<code class="sig-prename descclassname">EPICstuff.ADCPcdf2ncEPIC.</code><code class="sig-name descname">read_globalatts</code><span class="sig-paren">(</span><em class="sig-param">fname</em><span class="sig-paren">)</span><a class="headerlink" href="#EPICstuff.ADCPcdf2ncEPIC.read_globalatts" title="Permalink to this definition">¶</a></dt>
<dd><p># read_globalatts: read in file of metadata for a tripod or mooring
#
# reads global attributes for an experiment from a text file (fname)
# called by all data processing programs to get uniform metadata input
#  one argument is required- the name of the file to read- it should have
#  this form:
# SciPi;C. Sherwood
# PROJECT; ONR
# EXPERIMENT; RIPPLES DRI
# DESCRIPTION; Stress, SSC, and Bedforms at MVCO 12-m fine/coarse transition site
# DATA_SUBTYPE; MOORED
# DATA_ORIGIN; USGS WHFS Sed Trans Group
# COORD_SYSTEM; GEOGRAPHIC
# Conventions; PMEL/EPIC
# MOORING; 836
# WATER_DEPTH; 10.99
# latitude; 41.336063
# longitude; -70.559615
# magnetic_variation; -15
# Deployment_date; 27-Aug-2007
# Recovery_date;  ?</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fname</strong> (<em>str</em>) – input file name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict of metadata</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="EPICstuff.ADCPcdf2ncEPIC.setupEPICnc">
<code class="sig-prename descclassname">EPICstuff.ADCPcdf2ncEPIC.</code><code class="sig-name descname">setupEPICnc</code><span class="sig-paren">(</span><em class="sig-param">fname</em>, <em class="sig-param">rawcdf</em>, <em class="sig-param">attfile</em>, <em class="sig-param">settings</em><span class="sig-paren">)</span><a class="headerlink" href="#EPICstuff.ADCPcdf2ncEPIC.setupEPICnc" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct an empty netCDF output file to EPIC conventions</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>str</em>) – output netCDF file name</p></li>
<li><p><strong>rawcdf</strong> (<em>str</em>) – input netCDF raw data file</p></li>
<li><p><strong>attfile</strong> (<em>str</em>) – metadata text file</p></li>
<li><p><strong>settings</strong> (<em>dict</em>) – ‘good_ensembles’: [] starting and ending indices of input file.  For all data use [0,np.inf]
‘orientation’: ‘UP’ uplooking ADCP, for downlooking, use DOWN
‘transducer_offset_from_bottom’: float in meters
‘transformation’: ‘EARTH’  | BEAM | INST
‘adjust_to_UTC’: time offset in hours = 5 for EST to UTC, if no adjustment, set to 0 or omit</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>netCDF file object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="EPICstuff.ADCPcdf2ncEPIC.writeDict2atts">
<code class="sig-prename descclassname">EPICstuff.ADCPcdf2ncEPIC.</code><code class="sig-name descname">writeDict2atts</code><span class="sig-paren">(</span><em class="sig-param">cdfobj</em>, <em class="sig-param">d</em>, <em class="sig-param">tag</em><span class="sig-paren">)</span><a class="headerlink" href="#EPICstuff.ADCPcdf2ncEPIC.writeDict2atts" title="Permalink to this definition">¶</a></dt>
<dd><p>write a dictionary to netCDF attributes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cdfobj</strong> (<em>object</em>) – netcdf file object</p></li>
<li><p><strong>d</strong> (<em>dict</em>) – metadata</p></li>
<li><p><strong>tag</strong> (<em>str</em>) – tag to add before each atrribute name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict of metadata as written to file</p>
</dd>
</dl>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">ADCPy</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Generic tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#reshapeepic">reshapeEPIC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Nortekstuff.html">Nortek Signature tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="TRDIstuff.html">TRDI ADCP tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing ADCPy</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to ADCPy’s documentation!</a></li>
      <li>Next: <a href="Nortekstuff.html" title="next chapter">Nortek Signature tools</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Marinna Martini.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/EPICstuff.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>